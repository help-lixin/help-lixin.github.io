---
layout: post
title: '数据湖入门基础知识' 
date: 2021-09-18
author: 李新
tags:  数据湖
---


### (1). 前言

自己没有数据湖的相关积累,最近被安排出差做数据湖,以前认为,无非不过是采集数据,然后,把数据放到HDFS里进行存储就好了.    
结果: 客户比自己更加的精通数据湖,深入一学习,数据湖有着一套自己的术语以及管理方法.

### (2). 数据湖术语介绍
```
ODS层: Operation Data Store
      数据准备区,也称为贴源层,数据仓库源头系统的数据表通常会原封不动的存储一份,这称为ODS层,是后续数据仓库加工数据的来源.   
	  1. 保持数据的原汁原味,不做任何修改,有效的备份数据的作用.  
      2. 数据采用压缩,减少磁盘存储空间.
      3. 创建分区表,防止全表扫描.  

DW层: 
    DWD : Data Warehouse Detail
	  细节数据层,是业务层与数据仓库的隔离层.它的结构和粒度与ODS表保持一致,对ODS层数据进行清洗(去除空值)等操作.
	  DWD层需要构建维度模型,一般采用星型模型.
	  维度建模一般按照以下四个步骤:
	    1. 选择业务过程: 选择有业务价格的业务线,比如:下单业务/支付业务/退款业务/物流业务,每一条业务线对应一张"事实表".   
		2. 声明粒度: 是指数据仓库中保存数据的细化程度(注意:要尽可能的选择最小粒度),比如:每分钟的下单次数为一行,粒度就是:每分钟.   
		3. 确认维度: 维度是用来描述业务的事实.
		4. 确认事实: 
	
    DWS : Data Warehouse Service
	  一般是宽表.在DWD的基础上,按天进行轻度汇总
	  
	DWT : Data Warehouse Topic  
	 以DWS为基础,按主题进行汇总.
	  

ADS层: Application Data Service
     该层主要是提供数据产品和数据分析使用的数据,一般会存储在ES、MySQL等系统中供线上系统使用.  
```
### (3). 为什么要分层?
+ 隔离原始数据,将原始数据用作备份.使真实数据与统计数据解耦开.   
+ 复杂问题简单化,将复杂的原始数据进行拆解多层,每一层的处理难度低,方便定位.
+ 减少了开发的重复性,规范了数仓建设,极大的减少了重复的计算,增加了计算的结果复用性.  

### (4). 建模步骤
+ 业务模型(先分出主题)
  - 以业务的维度进行业务建模(比如:客户/商品/订单,可以,把客户归纳为:用户主题,把商口和订单归纳为:订单主题).   
+ 领域(概念)模型
  -  是从用户的角度出发,做概要设计(比如:商品).   
+ 逻辑模型
  -  对概念模型的补充,仅仅只设计表与表之间的关系,表有哪些字段之类的(比如:商品ID/商品名称/商品价格/商品所属品牌).   
+ 物理模型
  - 主要解决针对不同的数据库的物理化以及性能等一些具体的技术问题.
### (5). 数据湖库命名规范

+ ODS层: 主题名称_ods(例如:order_ods)
+ DWD层: 主题名称_dw(例如:order_dw)[dim_product/dim_customer/fact_order]   

### (6). 数据湖表命名规范
+ ODS层命名为: ods_表名称    
+ DWD层命名为: dwd_dim_表名称 / dwd_fact_表名称   
+ DWS层命令为: dws_表名称   
+ DWT层命名为: dwt_表名称   
+ ADS层命名为: ads_表名称   